<div class="view-payment-container" *ngIf="paymentForm">
  <mat-card *ngIf="!isLoading">
    <mat-card-header>
      <mat-card-title>Payment Details</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="paymentForm">
        <!-- Personal Information Section -->
        <div class="form-section">
          <h3>Personal Information</h3>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>First Name</mat-label>
              <input matInput formControlName="payee_first_name" readonly>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Last Name</mat-label>
              <input matInput formControlName="payee_last_name" readonly>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Email</mat-label>
              <input matInput formControlName="payee_email" readonly>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Phone Number</mat-label>
              <input matInput formControlName="payee_phone_number" readonly>
            </mat-form-field>
          </div>
        </div>

        <!-- Address Information Section -->
        <div class="form-section">
          <h3>Address Information</h3>
          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Address Line 1</mat-label>
              <input matInput formControlName="payee_address_line_1" readonly>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Address Line 2</mat-label>
              <input matInput formControlName="payee_address_line_2" readonly>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <input matInput formControlName="payee_city" readonly>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Country</mat-label>
              <input matInput formControlName="payee_country" readonly>
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>State/Province</mat-label>
              <input matInput formControlName="payee_province_or_state" readonly>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Postal Code</mat-label>
              <input matInput formControlName="payee_postal_code" readonly>
            </mat-form-field>
          </div>
        </div>

        <!-- Payment Information Section -->
        <div class="form-section">
          <h3>Payment Information</h3>
          

        
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Discount Percent</mat-label>
              <input matInput formControlName="discount_percent" readonly>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Tax Percent</mat-label>
              <input matInput formControlName="tax_percent" readonly>
            </mat-form-field>
        </div>
            <div class="form-row">
                <mat-form-field appearance="outline">
                  <mat-label>Due Amount</mat-label>
                  <input matInput formControlName="due_amount" readonly>
                </mat-form-field>
    
                <mat-form-field appearance="outline">
                  <mat-label>Total Due</mat-label>
                  <input matInput formControlName="total_due" readonly>
                </mat-form-field>
              </div>
              <div class="form-row">
                <mat-form-field appearance="outline">
                  <mat-label>Payment Status</mat-label>
                  <input matInput formControlName="payee_payment_status" readonly>
                </mat-form-field>
    
                
              </div>
         
        </div>

        <div class="form-actions">
          <button 
            mat-raised-button 
            color="primary" 
            (click)="downloadEvidence()" 
            *ngIf="payment.payee_payment_status === 'completed'">
            Download Evidence File
          </button>
          <button mat-button type="button" routerLink="/payments">Back to Payments</button>

        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
